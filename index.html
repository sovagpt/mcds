<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>McDonald's Employment Center</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'VT323', monospace;
            background: #FFC72C;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }

        /* Pixel/Retro Effects */
        .pixel-border {
            box-shadow: 
                0 -4px 0 0 #000,
                0 4px 0 0 #000,
                -4px 0 0 0 #000,
                4px 0 0 0 #000;
        }

        .pixel-corners {
            position: relative;
        }

        .pixel-corners::before,
        .pixel-corners::after {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            background: #000;
        }

        .pixel-corners::before {
            top: -4px;
            left: -4px;
        }

        .pixel-corners::after {
            top: -4px;
            right: -4px;
        }

        /* Header Styles */
        .header-main {
            background: #DA291C;
            border-bottom: 8px solid #000;
            box-shadow: 0 8px 0 rgba(0,0,0,0.2);
        }

        .header-main-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 40px;
        }

        .logo {
            font-family: 'Press Start 2P', monospace;
            font-size: 36px;
            color: #FFBC0D;
            font-weight: bold;
            text-shadow: 4px 4px 0 #000;
        }

        .nav-menu {
            display: flex;
            gap: 25px;
            list-style: none;
        }

        .nav-menu a {
            color: #FFBC0D;
            text-decoration: none;
            font-weight: 700;
            font-size: 14px;
            text-transform: uppercase;
            font-family: 'Press Start 2P', monospace;
            padding: 10px 18px;
            background: rgba(0,0,0,0.3);
            border: 4px solid #FFBC0D;
            transition: all 0.1s ease;
        }

        .nav-menu a:hover {
            background: rgba(0,0,0,0.5);
        }

        /* Hero Section */
        .hero {
            background: #DA291C;
            padding: 80px 20px;
            text-align: center;
            border-bottom: 8px solid #000;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(0,0,0,0.1) 2px,
                rgba(0,0,0,0.1) 4px
            );
            pointer-events: none;
        }

        .hero h1 {
            font-family: 'Press Start 2P', monospace;
            font-size: 4rem;
            color: #FFBC0D;
            text-shadow: 4px 4px 0 #000;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
            animation: float 3s ease-in-out infinite;
        }

        .hero-tagline {
            color: #FFBC0D;
            font-size: 1.8rem;
            font-family: 'VT323', monospace;
            text-shadow: 3px 3px 0 #000;
            position: relative;
            z-index: 1;
            margin-bottom: 10px;
            min-height: 60px;
        }

        .hero-subtitle {
            color: #fff;
            font-size: 1.3rem;
            font-family: 'Press Start 2P', monospace;
            text-shadow: 2px 2px 0 #000;
            position: relative;
            z-index: 1;
            margin-top: 20px;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 50%, 100% { opacity: 1; }
            25%, 75% { opacity: 0.5; }
        }

        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            flex: 1;
        }

        .input-section {
            background: white;
            padding: 40px;
            border: 8px solid #000;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            margin-bottom: 50px;
        }

        .input-group {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: stretch;
            flex-wrap: wrap;
        }

        input[type="text"] {
            padding: 18px 25px;
            font-size: 1.3rem;
            border: 4px solid #000;
            min-width: 320px;
            font-family: 'VT323', monospace;
            transition: all 0.1s ease;
            background: #fff;
            box-shadow: inset 4px 4px 0 rgba(0,0,0,0.1);
        }

        input[type="text"]:focus {
            outline: none;
            background: #FFFACD;
            box-shadow: inset 4px 4px 0 rgba(218, 41, 28, 0.2);
        }

        button {
            padding: 18px 45px;
            font-size: 1.2rem;
            font-weight: 700;
            background: #DA291C;
            color: #FFBC0D;
            border: 4px solid #000;
            cursor: pointer;
            font-family: 'Press Start 2P', monospace;
            transition: all 0.1s ease;
            box-shadow: 6px 6px 0 rgba(0,0,0,0.4);
            text-transform: uppercase;
        }

        button:hover:not(:disabled) {
            transform: translate(3px, 3px);
            box-shadow: 3px 3px 0 rgba(0,0,0,0.4);
        }

        button:active:not(:disabled) {
            transform: translate(6px, 6px);
            box-shadow: none;
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .loading {
            text-align: center;
            padding: 60px;
        }

        .spinner {
            border: 6px solid #FFBC0D;
            border-top: 6px solid #DA291C;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 30px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading p {
            color: #292929;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .results {
            display: none;
        }

        .results.active {
            display: block;
        }

        .application-wrapper {
            position: relative;
            margin-bottom: 50px;
        }

        .application {
            background: white;
            padding: 50px;
            border: 8px solid #000;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            position: relative;
        }

        .app-header {
            display: flex;
            align-items: center;
            gap: 30px;
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 6px dashed #000;
        }

        .pfp {
            width: 140px;
            height: 140px;
            border: 6px solid #000;
            object-fit: cover;
            box-shadow: 6px 6px 0 rgba(0,0,0,0.3);
            image-rendering: pixelated;
        }

        .user-info h2 {
            font-family: 'Press Start 2P', monospace;
            color: #DA291C;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .user-info p {
            font-family: 'VT323', monospace;
            font-size: 1.3rem;
            color: #333;
        }

        .app-title {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #FFBC0D;
            border: 6px solid #000;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.3);
        }

        .app-title h3 {
            font-family: 'Press Start 2P', monospace;
            color: #DA291C;
            font-size: 1.3rem;
            text-transform: uppercase;
        }

        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f9f9f9;
            border: 4px solid #000;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.1);
        }

        .form-section label {
            display: block;
            font-weight: 700;
            margin-bottom: 10px;
            color: #DA291C;
            text-transform: uppercase;
            font-size: 1rem;
            font-family: 'Press Start 2P', monospace;
        }

        .form-section .value {
            padding: 15px;
            background: white;
            border: 3px solid #000;
            min-height: 50px;
            color: #333;
            line-height: 1.8;
            font-family: 'VT323', monospace;
            font-size: 1.2rem;
        }

        .badge-container {
            opacity: 0;
            transition: opacity 0.6s ease;
            margin-top: 50px;
        }

        .badge-container.show {
            opacity: 1;
        }

        .badge {
            background: #DA291C;
            padding: 40px;
            border: 8px solid #000;
            max-width: 450px;
            margin: 0 auto;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            text-align: center;
            color: white;
            position: relative;
        }

        .badge::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            border: 4px dashed #FFBC0D;
            pointer-events: none;
        }

        .badge-header {
            background: #FFBC0D;
            color: #000;
            padding: 15px;
            border: 4px solid #000;
            margin-bottom: 30px;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.3);
        }

        .badge-header h4 {
            font-family: 'Press Start 2P', monospace;
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        .badge-pfp {
            width: 160px;
            height: 160px;
            border: 6px solid #000;
            margin: 0 auto 25px;
            display: block;
            box-shadow: 6px 6px 0 rgba(0,0,0,0.5);
            object-fit: cover;
            image-rendering: pixelated;
        }

        .badge h3 {
            font-family: 'Press Start 2P', monospace;
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #FFBC0D;
        }

        .badge .title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-transform: uppercase;
            font-family: 'VT323', monospace;
            font-weight: 700;
            letter-spacing: 2px;
        }

        .badge-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 25px;
        }

        .badge-detail {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border: 3px solid #FFBC0D;
        }

        .badge-detail-label {
            font-size: 0.7rem;
            font-family: 'Press Start 2P', monospace;
            opacity: 0.9;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .badge-detail-value {
            font-size: 1.2rem;
            font-family: 'VT323', monospace;
            font-weight: 700;
        }

        .action-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        /* Employee Chat */
        .employee-chat {
            margin-top: 80px;
            background: white;
            border: 8px solid #000;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            padding: 30px;
            margin-bottom: 80px;
        }

        .chat-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 6px dashed #000;
        }

        .chat-header h2 {
            font-family: 'Press Start 2P', monospace;
            font-size: 2rem;
            color: #DA291C;
            margin-bottom: 10px;
        }

        .chat-header p {
            font-family: 'VT323', monospace;
            font-size: 1.5rem;
            color: #000;
        }

        .chat-box {
            background: #f5f5f5;
            border: 4px solid #000;
            height: 400px;
            overflow-y: auto;
            padding: 20px;
            margin-bottom: 20px;
        }

        .chat-message {
            margin-bottom: 15px;
            padding: 12px;
            background: white;
            border: 3px solid #000;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chat-message-author {
            font-family: 'Press Start 2P', monospace;
            font-size: 0.8rem;
            color: #DA291C;
            margin-bottom: 8px;
        }

        .chat-message-text {
            font-family: 'VT323', monospace;
            font-size: 1.2rem;
            color: #333;
            word-wrap: break-word;
        }

        .chat-message-time {
            font-family: 'VT323', monospace;
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
            text-align: right;
        }

        .chat-input-container {
            display: flex;
            gap: 15px;
        }

        .chat-input-container input {
            flex: 1;
            padding: 15px;
            font-size: 1.2rem;
            border: 4px solid #000;
            font-family: 'VT323', monospace;
            background: #fff;
        }

        .chat-input-container button {
            padding: 15px 30px;
            font-size: 1rem;
        }

        /* Earnings Divider */
        .earnings-divider {
            margin: 80px 0;
            padding: 60px 40px;
        }

        .earnings-title {
            font-family: 'Press Start 2P', monospace;
            font-size: 2rem;
            color: #DA291C;
            margin-bottom: 40px;
            text-align: center;
            text-shadow: 4px 4px 0 #000;
        }

        .earnings-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .earnings-stat {
            background: #DA291C;
            border: 8px solid #000;
            padding: 30px 20px;
            text-align: center;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            position: relative;
        }

        .earnings-stat::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 4px dashed #FFBC0D;
            pointer-events: none;
        }

        .earnings-stat-label {
            font-family: 'Press Start 2P', monospace;
            font-size: 0.75rem;
            color: #FFBC0D;
            margin-bottom: 20px;
            letter-spacing: 1px;
            font-weight: bold;
        }

        .earnings-stat-value {
            font-family: 'Press Start 2P', monospace;
            font-size: 3rem;
            color: #fff;
            font-weight: bold;
            text-shadow: 4px 4px 0 rgba(0,0,0,0.5);
        }

        .earnings-message {
            background: #DA291C;
            border: 8px solid #000;
            padding: 40px;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            position: relative;
        }

        .earnings-message::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            border: 4px dashed #FFBC0D;
            pointer-events: none;
        }

        .earnings-message h3 {
            font-family: 'Press Start 2P', monospace;
            font-size: 1.5rem;
            color: #FFBC0D;
            margin-bottom: 25px;
            text-align: center;
            text-shadow: 3px 3px 0 rgba(0,0,0,0.5);
        }

        .earnings-message p {
            font-family: 'VT323', monospace;
            font-size: 1.5rem;
            color: #fff;
            line-height: 1.8;
            text-align: center;
        }
        .mcnomics-section {
            margin-top: 80px;
            background: white;
            border: 8px solid #000;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            padding: 30px;
        }

        .mcnomics-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 6px dashed #000;
        }

        .mcnomics-header h2 {
            font-family: 'Press Start 2P', monospace;
            font-size: 2rem;
            color: #DA291C;
            margin-bottom: 10px;
        }

        .mcnomics-header p {
            font-family: 'VT323', monospace;
            font-size: 1.5rem;
            color: #000;
        }

        .chart-container {
            width: 100%;
            height: 600px;
            border: 4px solid #000;
        }

        .chart-container iframe {
            width: 100%;
            height: 100%;
            display: block;
        }
        .employee-wall {
            margin-top: 80px;
        }

        .wall-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .wall-header h2 {
            font-family: 'Press Start 2P', monospace;
            font-size: 2rem;
            color: #DA291C;
            margin-bottom: 10px;
        }

        .wall-header p {
            font-family: 'VT323', monospace;
            color: #000;
            font-size: 1.5rem;
        }

        .wall-search {
            max-width: 500px;
            margin: 0 auto 40px;
        }

        .wall-search input {
            width: 100%;
        }

        .employee-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .employee-card {
            background: white;
            border: 6px solid #000;
            padding: 20px;
            text-align: center;
            box-shadow: 6px 6px 0 rgba(0,0,0,0.2);
            transition: transform 0.1s ease;
            cursor: pointer;
            position: relative;
        }

        .employee-card:hover {
            transform: translate(3px, 3px);
            box-shadow: 3px 3px 0 rgba(0,0,0,0.2);
        }

        .employee-card:active {
            transform: translate(6px, 6px);
            box-shadow: none;
        }

        .employee-card-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border: 8px solid #000;
            box-shadow: 12px 12px 0 rgba(0,0,0,0.5);
            padding: 40px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 1000;
        }

        .employee-card-popup.active {
            display: block;
        }

        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 999;
        }

        .popup-overlay.active {
            display: block;
        }

        .popup-close {
            position: absolute;
            top: 10px;
            right: 10px;
            font-family: 'Press Start 2P', monospace;
            font-size: 1.5rem;
            color: #DA291C;
            cursor: pointer;
            background: #FFBC0D;
            border: 4px solid #000;
            padding: 10px 15px;
        }

        .popup-close:hover {
            background: #ffa500;
        }

        .employee-card img {
            width: 100px;
            height: 100px;
            border: 4px solid #000;
            margin-bottom: 15px;
            object-fit: cover;
            image-rendering: pixelated;
        }

        .employee-card h4 {
            font-family: 'Press Start 2P', monospace;
            color: #DA291C;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .employee-card p {
            color: #333;
            font-size: 1.1rem;
            font-family: 'VT323', monospace;
            font-weight: 600;
        }

        /* Footer */
        footer {
            background: #DA291C;
            color: #FFBC0D;
            padding: 30px 20px;
            margin-top: 80px;
            border-top: 8px solid #000;
            text-align: center;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            font-family: 'VT323', monospace;
            font-size: 1.3rem;
        }

        .footer-content p {
            margin-bottom: 15px;
        }

        .footer-links {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: #FFBC0D;
            text-decoration: none;
            font-family: 'Press Start 2P', monospace;
            font-size: 0.8rem;
            padding: 10px 20px;
            border: 4px solid #000;
            background: rgba(0,0,0,0.3);
            transition: all 0.1s ease;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.3);
        }

        .footer-links a:hover {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0 rgba(0,0,0,0.3);
        }

        .footer-bottom {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 4px dashed rgba(255, 188, 13, 0.5);
            font-size: 1.1rem;
            font-family: 'Press Start 2P', monospace;
            font-size: 0.7rem;
        }

        @media (max-width: 768px) {
            .logo {
                font-size: 28px;
            }

            .nav-menu {
                gap: 10px;
            }

            .nav-menu a {
                font-size: 0.6rem;
                padding: 8px 12px;
            }

            .hero h1 {
                font-size: 1.8rem;
            }

            .hero p {
                font-size: 1.2rem;
            }

            .app-header {
                flex-direction: column;
            }

            input[type="text"] {
                min-width: 100%;
            }

            button {
                font-size: 0.9rem;
                padding: 15px 30px;
            }

            .application {
                padding: 30px 20px;
            }

            .user-info h2 {
                font-size: 1rem;
            }

            .app-title h3 {
                font-size: 1rem;
            }

            .form-section label {
                font-size: 0.7rem;
            }

            .badge h3 {
                font-size: 1.2rem;
            }

            .badge-header h4 {
                font-size: 0.7rem;
            }

            .wall-header h2 {
                font-size: 1.3rem;
            }

            .employee-card h4 {
                font-size: 0.7rem;
            }

            .footer-links a {
                font-size: 0.6rem;
                padding: 8px 15px;
            }

            .footer-bottom {
                font-size: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-main">
            <div class="header-main-content">
                <div class="logo">M</div>
                <nav>
                    <ul class="nav-menu">
                        <li><a href="#home">Home</a></li>
                        <li><a href="https://twitter.com" target="_blank">Twitter</a></li>
                        <li><a href="https://pump.fun" target="_blank">Pump.fun</a></li>
                        <li><a href="#pfp">McDonald's PFP</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <div class="hero">
        <h1>McDONALDS.FUN</h1>
        <div class="hero-tagline" id="heroTagline">Loading...</div>
        <div class="hero-subtitle">▼ START YOUR APPLICATION BELOW ▼</div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <div class="input-section">
            <form id="applicationForm">
                <div class="input-group">
                    <input 
                        type="text" 
                        id="username" 
                        placeholder="Enter Twitter @ (e.g., elonmusk)"
                        required
                    />
                    <button type="submit" id="submitBtn">
                        Apply Now
                    </button>
                </div>
            </form>
        </div>

        <div id="loading" class="loading" style="display: none;">
            <div class="spinner"></div>
            <p>Reviewing your qualifications...</p>
        </div>

        <div id="results" class="results">
            <div class="application-wrapper">
                <div id="applicationCard" class="application">
                    <div class="app-title">
                        <h3>Employment Application</h3>
                    </div>

                    <div class="app-header">
                        <img id="appPfp" src="" alt="Profile" class="pfp" />
                        <div class="user-info">
                            <h2 id="appName">Name</h2>
                            <p id="appBio">Bio</p>
                        </div>
                    </div>

                    <div class="form-section">
                        <label>Position Applied For:</label>
                        <div class="value" id="position">Crew Member</div>
                    </div>

                    <div class="form-section">
                        <label>Why do you want to work at McDonald's?</label>
                        <div class="value" id="whyMcdonalds"></div>
                    </div>

                    <div class="form-section">
                        <label>Previous Experience:</label>
                        <div class="value" id="experience"></div>
                    </div>

                    <div class="form-section">
                        <label>Special Skills:</label>
                        <div class="value" id="skills"></div>
                    </div>

                    <div class="form-section">
                        <label>Available to Start:</label>
                        <div class="value" id="startDate">Immediately</div>
                    </div>

                    <div class="form-section">
                        <label>Manager's Additional Comments:</label>
                        <div class="value" id="comments"></div>
                    </div>
                </div>
            </div>

            <div id="badgeContainer" class="badge-container">
                <div id="badgeCard" class="badge">
                    <div class="badge-header">
                        <h4>Official Employee Badge</h4>
                    </div>
                    <img id="badgePfp" src="" alt="Employee" class="badge-pfp" />
                    <h3 id="badgeName">Name</h3>
                    <div class="title">CREW MEMBER</div>
                    <div class="badge-details">
                        <div class="badge-detail">
                            <div class="badge-detail-label">Employee ID</div>
                            <div class="badge-detail-value" id="employeeId">#000000</div>
                        </div>
                        <div class="badge-detail">
                            <div class="badge-detail-label">Member Since</div>
                            <div class="badge-detail-value" id="since">2025</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button onclick="downloadApplication()">
                    Download Application
                </button>
                <button onclick="downloadBadge()">
                    Download Badge
                </button>
                <button onclick="shareToTwitter()">
                    Share to Twitter
                </button>
            </div>

            <!-- Referral Box -->
            <div class="referral-box" id="referralBox" style="display: none;">
                <h3>YOUR REFERRAL LINK</h3>
                <p style="color: #FFBC0D; font-family: 'VT323', monospace; font-size: 1.3rem;">Share this link to earn points!</p>
                <div class="referral-link-container">
                    <input type="text" id="referralLink" readonly />
                    <button onclick="copyReferralLink()">COPY</button>
                </div>
            </div>
        </div>

        <!-- Testimonials Section -->
        <div class="testimonials-section">
            <div class="testimonials-header">
                <h2>EMPLOYEE REVIEWS</h2>
                <p>Hear from our satisfied crew members!</p>
            </div>

            <div class="testimonials-wrapper">
                <div class="testimonial-nav prev" onclick="prevTestimonial()">◄</div>
                <div class="testimonial-nav next" onclick="nextTestimonial()">►</div>
                <div class="testimonials-track" id="testimonialsTrack">
                    <!-- Testimonials will be dynamically added here -->
                </div>
            </div>
            <div class="testimonial-dots" id="testimonialDots"></div>
        </div>

        <!-- Leaderboard Section -->
        <div class="leaderboard-section">
            <div class="leaderboard-header">
                <h2>EMPLOYEE OF THE MONTH</h2>
                <p>Top recruiters earn legendary status!</p>
            </div>

            <div class="leaderboard-list" id="leaderboardList">
                <p style="text-align: center; font-family: 'VT323', monospace; font-size: 1.3rem;">Loading leaderboard...</p>
            </div>
        </div>

        <!-- Employee Wall -->
        <div class="employee-wall">
            <div class="wall-header">
                <h2>EMPLOYEE WALL</h2>
                <p>Meet our newest crew members!</p>
            </div>

            <div class="wall-search">
                <input 
                    type="text" 
                    id="searchEmployee" 
                    placeholder="Search employees by name..."
                />
            </div>

            <div class="employee-grid" id="employeeGrid">
                <!-- Employees will be dynamically added here -->
            </div>
        </div>

        <!-- Employee Chat -->
        <div class="employee-chat">
            <div class="chat-header">
                <h2>EMPLOYEES CHAT</h2>
                <p>Talk with fellow crew members!</p>
            </div>

            <div class="chat-box" id="chatBox">
                <!-- Messages will appear here -->
            </div>

            <div class="chat-input-container">
                <input 
                    type="text" 
                    id="chatInput" 
                    placeholder="Type your message..."
                    maxlength="200"
                />
                <button onclick="sendMessage()">SEND</button>
            </div>
        </div>

        <!-- Earnings Divider -->
        <div class="earnings-divider">
            <div class="earnings-title">TODAY'S EARNINGS REPORT</div>
            
            <div class="earnings-stats">
                <div class="earnings-stat">
                    <div class="earnings-stat-label">APPLICATIONS</div>
                    <div class="earnings-stat-value" id="applicationsCount">0</div>
                </div>
                <div class="earnings-stat">
                    <div class="earnings-stat-label">EMPLOYEES HIRED</div>
                    <div class="earnings-stat-value" id="employeesCount">0</div>
                </div>
                <div class="earnings-stat">
                    <div class="earnings-stat-label">TRENCHOORS ESCAPED</div>
                    <div class="earnings-stat-value" id="trenchoorsCount">0</div>
                </div>
                <div class="earnings-stat">
                    <div class="earnings-stat-label">ACTIVE CREW</div>
                    <div class="earnings-stat-value" id="activeCrewCount">0</div>
                </div>
            </div>

            <div class="earnings-message">
                <h3>THE TRENCHES ARE DEAD</h3>
                <p>
                    Stop staring at red candles and start flipping burgers. McDonald's is hiring TODAY and we're the greatest employer in the game. 
                    Your degen skills? We want them. Chart reading? Perfect for monitoring fry timers. Diamond hands? Great for holding hot trays. 
                    Late night trading sessions? We've got the night shift covered. Join the crew and put your hard-earned skills to work where they actually matter. 
                    Benefits include: stable income, free meals, and no more watching your portfolio bleed. Apply now and leave the trenches behind forever.
                </p>
            </div>
        </div>

        <!-- McNomics Section -->
        <div class="mcnomics-section">
            <div class="mcnomics-header">
                <h2>McNOMICS</h2>
                <p>Track the value of your employment!</p>
            </div>

            <div class="chart-container">
                <iframe 
                    src="https://birdeye.so/tv-widget/pumpCmXqMfrsAkQ5r49WcJnRayYRqmXz6ae8H7H9Dfn?chain=solana&viewMode=pair&chartInterval=1&chartType=Candle&chartTimezone=Europe%2FLondon&chartLeftToolbar=show&theme=dark&cssCustomProperties=--tv-color-platform-background%3A%23ffc72c&cssCustomProperties=--tv-color-pane-background%3A%23ffc72c&chartOverrides=paneProperties.backgroundGradientStartColor%3Argba%2848%2C+48%2C+48%2C+1%29&chartOverrides=paneProperties.backgroundType%3Asolid" 
                    frameborder="0" 
                    allowfullscreen>
                </iframe>
            </div>
        </div>
    </div>

    <!-- Popup Overlay -->
    <div class="popup-overlay" id="popupOverlay" onclick="closeEmployeePopup()"></div>
    <div class="employee-card-popup" id="employeePopup">
        <div class="popup-close" onclick="closeEmployeePopup()">✕</div>
        <div id="popupContent"></div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <p>🍔 LEAVING THE TRENCHES? JOIN THE CREW! 🍟</p>
            <div class="footer-links">
                <a href="https://twitter.com" target="_blank">TWITTER</a>
                <a href="https://pump.fun" target="_blank">PUMP.FUN</a>
                <a href="#home">HOME</a>
            </div>
            <div class="footer-bottom">
                <p>Copyright © 2025 Mcdonalds.fun. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBL_Abt3EEibFA-67ypLx_QwdIv9lY3xds",
            authDomain: "polymarket-675a5.firebaseapp.com",
            databaseURL: "https://polymarket-675a5-default-rtdb.firebaseio.com",
            projectId: "polymarket-675a5",
            storageBucket: "polymarket-675a5.firebasestorage.app",
            messagingSenderId: "763899221788",
            appId: "1:763899221788:web:3b6a2e86950e88c8b40cd9",
            measurementId: "G-6QN30DZS8Z"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const messagesRef = database.ref('messages');

        const form = document.getElementById('applicationForm');
        const loading = document.getElementById('loading');
        const results = document.getElementById('results');
        const submitBtn = document.getElementById('submitBtn');
        const employeeGrid = document.getElementById('employeeGrid');
        const searchInput = document.getElementById('searchEmployee');
        const chatBox = document.getElementById('chatBox');
        const chatInput = document.getElementById('chatInput');

        // Rotating hero taglines
        const taglines = [
            "From trenches to tendies, one burger at a time!",
            "We're not just hiring, we're saving lives!",
            "Your bags are heavy, but our trays are heavier!",
            "Diamond hands? Try holding a McFlurry machine!",
            "Chart watching skills transfer to fry timers!",
            "Leave the volatility, embrace the stability!"
        ];
        
        let taglineIndex = 0;
        
        function rotateTagline() {
            const taglineEl = document.getElementById('heroTagline');
            taglineEl.style.opacity = '0';
            setTimeout(() => {
                taglineEl.textContent = taglines[taglineIndex];
                taglineEl.style.opacity = '1';
                taglineIndex = (taglineIndex + 1) % taglines.length;
            }, 300);
        }
        
        // Initialize and rotate taglines
        document.getElementById('heroTagline').textContent = taglines[0];
        document.getElementById('heroTagline').style.transition = 'opacity 0.3s';
        setInterval(rotateTagline, 4000);

        // Store employees in localStorage
        let employees = JSON.parse(localStorage.getItem('mcdonalds_employees') || '[]');

        // Hardcoded testimonial quotes
        const testimonialQuotes = [
            "Best decision of my life. Went from watching charts 24/7 to actually making consistent money.",
            "Finally left the trenches. My mental health has never been better and I can actually afford rent.",
            "I used to ape into rugs, now I clean them. McDonald's saved me. 10/10 would recommend.",
            "The ice cream machine is more reliable than my old portfolio. Should've joined sooner.",
            "Went from diamond hands to holding a spatula. Best career change I ever made.",
            "From trading shitcoins to serving Big Macs. At least the job security is real.",
            "No more rug pulls, just french fries. Living the dream tbh.",
            "I make more flipping burgers than I ever made flipping NFTs. No cap.",
            "The only thing pumping now is the McFlurry machine. And I'm okay with that.",
            "Left the degen life behind. Now I'm a professional burger architect."
        ];

        // Display employees on load
        displayEmployees();

        // Load chat messages
        loadChatMessages();

        // Animate earnings numbers on page load
        animateEarnings();

        // Load leaderboard
        loadLeaderboard();

        // Load testimonials
        loadTestimonials();

        // Get referral code from URL or generate new one
        const urlParams = new URLSearchParams(window.location.search);
        const referredBy = urlParams.get('ref');

        function loadTestimonials() {
            const carousel = document.getElementById('testimonialsCarousel');
            
            // Get random employees or use last 10
            const testimonialEmployees = employees.slice(-10).reverse();
            
            if (testimonialEmployees.length === 0) {
                // Show placeholder if no employees yet
                carousel.innerHTML = `
                    <div class="testimonial-card">
                        <div class="testimonial-header">
                            <img src="data:image/svg+xml,%3Csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3E%3Crect fill='%23DA291C' width='60' height='60'/%3E%3Ctext x='30' y='40' font-size='30' text-anchor='middle' fill='%23FFBC0D' font-family='Arial'%3E🍔%3C/text%3E%3C/svg%3E" class="testimonial-img" alt="Employee" />
                            <div class="testimonial-info">
                                <h4>BE THE FIRST</h4>
                                <p>Future Employee</p>
                            </div>
                        </div>
                        <div class="testimonial-text">
                            Apply now and be the first employee featured in our testimonials! Leave the trenches behind and join the crew.
                        </div>
                    </div>
                `.repeat(3);
                return;
            }

            // Create testimonials from actual employees
            const testimonials = testimonialEmployees.map(emp => {
                const randomQuote = testimonialQuotes[Math.floor(Math.random() * testimonialQuotes.length)];
                return `
                    <div class="testimonial-card">
                        <div class="testimonial-header">
                            <img src="${emp.pfpUrl}" class="testimonial-img" alt="${emp.name}" />
                            <div class="testimonial-info">
                                <h4>${escapeHtml(emp.name.toUpperCase())}</h4>
                                <p>${escapeHtml(emp.position)}</p>
                            </div>
                        </div>
                        <div class="testimonial-text">
                            "${randomQuote}"
                        </div>
                    </div>
                `;
            }).join('');

            // Duplicate for infinite scroll effect
            carousel.innerHTML = testimonials + testimonials;
        }

        function loadLeaderboard() {
            fetch('/api/leaderboard')
                .then(res => res.json())
                .then(data => {
                    displayLeaderboard(data.leaderboard || []);
                })
                .catch(err => {
                    console.error('Failed to load leaderboard:', err);
                    document.getElementById('leaderboardList').innerHTML = 
                        '<p style="text-align: center; font-family: \'VT323\', monospace; font-size: 1.3rem;">No recruiters yet. Be the first!</p>';
                });
        }

        function displayLeaderboard(leaderboard) {
            const list = document.getElementById('leaderboardList');
            if (leaderboard.length === 0) {
                list.innerHTML = '<p style="text-align: center; font-family: \'VT323\', monospace; font-size: 1.3rem;">No recruiters yet. Be the first!</p>';
                return;
            }

            list.innerHTML = leaderboard.map((user, index) => `
                <div class="leaderboard-item ${index < 3 ? 'top-3' : ''}">
                    <div class="leaderboard-rank">#${index + 1}</div>
                    <div class="leaderboard-name">${escapeHtml(user.name)}</div>
                    <div class="leaderboard-score">${user.referrals} REFS</div>
                </div>
            `).join('');
        }

        function closeEmployeePopup() {
            document.getElementById('popupOverlay').classList.remove('active');
            document.getElementById('employeePopup').classList.remove('active');
        }

        function showEmployeeApplication(employee) {
            const popup = document.getElementById('employeePopup');
            const overlay = document.getElementById('popupOverlay');
            const content = document.getElementById('popupContent');

            content.innerHTML = `
                <div style="text-align: center; margin-bottom: 30px;">
                    <img src="${employee.pfpUrl}" style="width: 120px; height: 120px; border: 6px solid #000; object-fit: cover; margin-bottom: 15px;" />
                    <h2 style="font-family: 'Press Start 2P', monospace; color: #DA291C; font-size: 1.3rem; margin-bottom: 10px;">${escapeHtml(employee.name)}</h2>
                    <p style="font-family: 'VT323', monospace; font-size: 1.3rem; color: #666;">${escapeHtml(employee.position)}</p>
                    <p style="font-family: 'VT323', monospace; font-size: 1.1rem; color: #999; margin-top: 5px;">Employee #${employee.employeeId}</p>
                </div>
            `;

            overlay.classList.add('active');
            popup.classList.add('active');
        }

        function animateEarnings() {
            const employeeCount = employees.length;
            const applicationsCount = employeeCount + 32;
            
            // Set targets based on real data
            const targets = {
                applicationsCount: applicationsCount,
                employeesCount: employeeCount,
                trenchoorsCount: employeeCount,
                activeCrewCount: employeeCount
            };

            Object.keys(targets).forEach(id => {
                const element = document.getElementById(id);
                const target = targets[id];
                const duration = 2000;
                const increment = target / (duration / 16);
                let current = 0;

                const updateCounter = () => {
                    current += increment;
                    if (current < target) {
                        element.textContent = Math.floor(current);
                        requestAnimationFrame(updateCounter);
                    } else {
                        element.textContent = target;
                    }
                };

                updateCounter();
            });
        }

        // Update earnings when new employee is added
        function updateEarnings() {
            const employeeCount = employees.length;
            document.getElementById('applicationsCount').textContent = employeeCount + 32;
            document.getElementById('employeesCount').textContent = employeeCount;
            document.getElementById('trenchoorsCount').textContent = employeeCount;
            document.getElementById('activeCrewCount').textContent = employeeCount;
        }

        function loadChatMessages() {
            messagesRef.limitToLast(50).on('child_added', (snapshot) => {
                const message = snapshot.val();
                displayChatMessage(message);
            });
        }

        function displayChatMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'chat-message';
            
            const time = new Date(message.timestamp).toLocaleTimeString('en-US', {
                hour: '2-digit',
                minute: '2-digit'
            });
            
            messageDiv.innerHTML = `
                <div class="chat-message-author">${escapeHtml(message.author)}</div>
                <div class="chat-message-text">${escapeHtml(message.text)}</div>
                <div class="chat-message-time">${time}</div>
            `;
            
            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function sendMessage() {
            const text = chatInput.value.trim();
            if (!text) return;

            // Generate or retrieve employee ID
            let employeeId = localStorage.getItem('mcdonalds_employee_id');
            if (!employeeId) {
                employeeId = 'employee-' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('mcdonalds_employee_id', employeeId);
            }
            
            messagesRef.push({
                author: employeeId,
                text: text,
                timestamp: Date.now()
            });

            chatInput.value = '';
        }

        // Allow Enter key to send message
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function createPlaceholderPfp() {
            const canvas = document.createElement('canvas');
            canvas.width = 140;
            canvas.height = 140;
            const ctx = canvas.getContext('2d');
            
            ctx.fillStyle = '#DA291C';
            ctx.fillRect(0, 0, 140, 140);
            
            ctx.strokeStyle = '#FFBC0D';
            ctx.lineWidth = 8;
            ctx.strokeRect(4, 4, 132, 132);
            
            ctx.font = 'bold 60px Arial';
            ctx.fillStyle = '#FFBC0D';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('M', 70, 70);
            
            return canvas.toDataURL('image/png');
        }

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const username = document.getElementById('username').value.replace('@', '').trim();
            if (!username) return;

            loading.style.display = 'block';
            results.classList.remove('active');
            submitBtn.disabled = true;

            try {
                const response = await fetch('/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username })
                });

                if (!response.ok) throw new Error('Failed to generate application');

                const data = await response.json();
                
                const pfpUrl = data.profileImageUrl || createPlaceholderPfp();
                
                // Store username for chat
                localStorage.setItem('mcdonalds_username', data.name);
                
                document.getElementById('appPfp').src = pfpUrl;
                document.getElementById('badgePfp').src = pfpUrl;
                document.getElementById('appName').textContent = data.name;
                document.getElementById('appBio').textContent = data.bio;
                document.getElementById('position').textContent = data.position;
                document.getElementById('whyMcdonalds').textContent = data.whyMcdonalds;
                document.getElementById('experience').textContent = data.experience;
                document.getElementById('skills').textContent = data.skills;
                document.getElementById('startDate').textContent = data.startDate;
                document.getElementById('comments').textContent = data.comments;
                document.getElementById('badgeName').textContent = data.name;
                document.getElementById('employeeId').textContent = `#${data.employeeId}`;
                document.getElementById('since').textContent = new Date().getFullYear();

                // Add to employee wall
                addEmployee({
                    name: data.name,
                    position: data.position,
                    employeeId: data.employeeId,
                    pfpUrl: pfpUrl
                });

                // Update earnings display
                updateEarnings();

                // Refresh testimonials
                loadTestimonials();

                loading.style.display = 'none';
                results.classList.add('active');

                // Generate and show referral link
                generateReferralLink(data.name, data.employeeId);

                setTimeout(() => {
                    document.getElementById('badgeContainer').classList.add('show');
                }, 500);

            } catch (error) {
                console.error('Error:', error);
                alert('Failed to generate application. Please try again.');
                loading.style.display = 'none';
            } finally {
                submitBtn.disabled = false;
            }
        });

        async function generateReferralLink(name, employeeId) {
            try {
                const response = await fetch('/api/generate-referral', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name, employeeId, referredBy })
                });

                const data = await response.json();
                const referralLink = `${window.location.origin}?ref=${data.referralCode}`;
                
                document.getElementById('referralLink').value = referralLink;
                document.getElementById('referralBox').style.display = 'block';
                
                // Store referral code
                localStorage.setItem('mcdonalds_referral_code', data.referralCode);
            } catch (error) {
                console.error('Failed to generate referral link:', error);
            }
        }

        function copyReferralLink() {
            const input = document.getElementById('referralLink');
            input.select();
            document.execCommand('copy');
            alert('Referral link copied! Share it to earn points!');
        }

        function addEmployee(employee) {
            // Check if employee already exists
            const exists = employees.find(e => e.employeeId === employee.employeeId);
            if (!exists) {
                employees.unshift(employee);
                // Keep only last 50 employees
                if (employees.length > 50) {
                    employees = employees.slice(0, 50);
                }
                localStorage.setItem('mcdonalds_employees', JSON.stringify(employees));
                displayEmployees();
            }
        }

        function displayEmployees(filter = '') {
            const filtered = filter 
                ? employees.filter(e => e.name.toLowerCase().includes(filter.toLowerCase()))
                : employees;

            employeeGrid.innerHTML = filtered.map(emp => `
                <div class="employee-card" onclick='showEmployeeApplication(${JSON.stringify(emp).replace(/'/g, "&#39;")})'>
                    <img src="${emp.pfpUrl}" alt="${emp.name}" />
                    <h4>${emp.name}</h4>
                    <p>${emp.position}</p>
                    <p style="font-size: 0.75rem; color: #999;">#${emp.employeeId}</p>
                </div>
            `).join('');

            if (filtered.length === 0) {
                employeeGrid.innerHTML = '<p style="text-align: center; grid-column: 1/-1; color: #666;">No employees found. Be the first to apply!</p>';
            }
        }

        searchInput.addEventListener('input', (e) => {
            displayEmployees(e.target.value);
        });

        async function downloadApplication() {
            const element = document.getElementById('applicationCard');
            const canvas = await html2canvas(element, {
                scale: 2,
                backgroundColor: '#ffffff'
            });
            
            const link = document.createElement('a');
            link.download = 'mcdonalds-application.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        async function downloadBadge() {
            const element = document.getElementById('badgeCard');
            const canvas = await html2canvas(element, {
                scale: 2,
                backgroundColor: null
            });
            
            const link = document.createElement('a');
            link.download = 'mcdonalds-badge.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        function shareToTwitter() {
            const text = encodeURIComponent("I'm leaving the trenches and working for mcdonalds.fun - generate yours today!");
            const url = encodeURIComponent('https://mcdonalds.fun');
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
        }
    </script>
</body>
</html>
