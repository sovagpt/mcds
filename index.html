<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>McDonald's Employment Center</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <audio id="bgMusic" loop>
    <source src="https://github.com/sovagpt/mcds/raw/main/beep.mp3" type="audio/mpeg">
</audio>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'VT323', monospace;
            background: #FFC72C;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }

        .pixel-border {
            box-shadow: 
                0 -4px 0 0 #000,
                0 4px 0 0 #000,
                -4px 0 0 0 #000,
                4px 0 0 0 #000;
        }

        .pixel-corners {
            position: relative;
        }

        .pixel-corners::before,
        .pixel-corners::after {
            content: '';
            position: absolute;
            width: 8px;
            height: 8px;
            background: #000;
        }

        .pixel-corners::before {
            top: -4px;
            left: -4px;
        }

        .pixel-corners::after {
            top: -4px;
            right: -4px;
        }

        .header-main {
            background: #DA291C;
            border-bottom: 8px solid #000;
            box-shadow: 0 8px 0 rgba(0,0,0,0.2);
        }

        .header-main-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 40px;
        }

        .logo {
            font-family: 'Press Start 2P', monospace;
            font-size: 36px;
            color: #FFBC0D;
            font-weight: bold;
            text-shadow: 4px 4px 0 #000;
        }

        .nav-menu {
            display: flex;
            gap: 25px;
            list-style: none;
        }

        .nav-menu a {
            color: #FFBC0D;
            text-decoration: none;
            font-weight: 700;
            font-size: 14px;
            text-transform: uppercase;
            font-family: 'Press Start 2P', monospace;
            padding: 10px 18px;
            background: rgba(0,0,0,0.3);
            border: 4px solid #FFBC0D;
            transition: all 0.1s ease;
        }

        .nav-menu a:hover {
            background: rgba(0,0,0,0.5);
        }

        .hero {
            background: #DA291C;
            padding: 80px 20px;
            text-align: center;
            border-bottom: 8px solid #000;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(0,0,0,0.1) 2px,
                rgba(0,0,0,0.1) 4px
            );
            pointer-events: none;
        }

        .hero h1 {
            font-family: 'Press Start 2P', monospace;
            font-size: 4rem;
            color: #FFBC0D;
            text-shadow: 4px 4px 0 #000;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
            animation: float 3s ease-in-out infinite;
        }

        .hero-tagline {
            color: #FFBC0D;
            font-size: 1.8rem;
            font-family: 'VT323', monospace;
            text-shadow: 3px 3px 0 #000;
            position: relative;
            z-index: 1;
            margin-bottom: 10px;
            min-height: 60px;
            transition: opacity 0.3s;
        }

        .hero-subtitle {
            color: #fff;
            font-size: 1.3rem;
            font-family: 'Press Start 2P', monospace;
            text-shadow: 2px 2px 0 #000;
            position: relative;
            z-index: 1;
            margin-top: 20px;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 50%, 100% { opacity: 1; }
            25%, 75% { opacity: 0.5; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            flex: 1;
        }

        .input-section {
            background: white;
            padding: 40px;
            border: 8px solid #000;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            margin-bottom: 50px;
        }

        .input-group {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: stretch;
            flex-wrap: wrap;
        }

        input[type="text"] {
            padding: 18px 25px;
            font-size: 1.3rem;
            border: 4px solid #000;
            min-width: 320px;
            font-family: 'VT323', monospace;
            transition: all 0.1s ease;
            background: #fff;
            box-shadow: inset 4px 4px 0 rgba(0,0,0,0.1);
        }

        input[type="text"]:focus {
            outline: none;
            background: #FFFACD;
            box-shadow: inset 4px 4px 0 rgba(218, 41, 28, 0.2);
        }

        button {
            padding: 18px 45px;
            font-size: 1.2rem;
            font-weight: 700;
            background: #DA291C;
            color: #FFBC0D;
            border: 4px solid #000;
            cursor: pointer;
            font-family: 'Press Start 2P', monospace;
            transition: all 0.1s ease;
            box-shadow: 6px 6px 0 rgba(0,0,0,0.4);
            text-transform: uppercase;
        }

        button:hover:not(:disabled) {
            transform: translate(3px, 3px);
            box-shadow: 3px 3px 0 rgba(0,0,0,0.4);
        }

        button:active:not(:disabled) {
            transform: translate(6px, 6px);
            box-shadow: none;
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .loading {
            text-align: center;
            padding: 60px;
        }

        .spinner {
            border: 6px solid #FFBC0D;
            border-top: 6px solid #DA291C;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 30px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading p {
            color: #292929;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .results {
            display: none;
        }

        .results.active {
            display: block;
        }

        .application-wrapper {
            position: relative;
            margin-bottom: 50px;
        }

        .application {
            background: white;
            padding: 50px;
            border: 8px solid #000;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            position: relative;
        }

        .app-header {
            display: flex;
            align-items: center;
            gap: 30px;
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 6px dashed #000;
        }

        .pfp {
            width: 140px;
            height: 140px;
            border: 6px solid #000;
            object-fit: cover;
            box-shadow: 6px 6px 0 rgba(0,0,0,0.3);
            image-rendering: pixelated;
        }

        .user-info h2 {
            font-family: 'Press Start 2P', monospace;
            color: #DA291C;
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .user-info p {
            font-family: 'VT323', monospace;
            font-size: 1.3rem;
            color: #333;
        }

        .app-title {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #FFBC0D;
            border: 6px solid #000;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.3);
        }

        .app-title h3 {
            font-family: 'Press Start 2P', monospace;
            color: #DA291C;
            font-size: 1.3rem;
            text-transform: uppercase;
        }

        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f9f9f9;
            border: 4px solid #000;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.1);
        }

        .form-section label {
            display: block;
            font-weight: 700;
            margin-bottom: 10px;
            color: #DA291C;
            text-transform: uppercase;
            font-size: 1rem;
            font-family: 'Press Start 2P', monospace;
        }

        .form-section .value {
            padding: 15px;
            background: white;
            border: 3px solid #000;
            min-height: 50px;
            color: #333;
            line-height: 1.8;
            font-family: 'VT323', monospace;
            font-size: 1.2rem;
        }

        .badge-container {
            opacity: 0;
            transition: opacity 0.6s ease;
            margin-top: 50px;
        }

        .badge-container.show {
            opacity: 1;
        }

        .badge {
            background: #DA291C;
            padding: 40px;
            border: 8px solid #000;
            max-width: 450px;
            margin: 0 auto;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            text-align: center;
            color: white;
            position: relative;
        }

        .badge::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            border: 4px dashed #FFBC0D;
            pointer-events: none;
        }

        .badge-header {
            background: #FFBC0D;
            color: #000;
            padding: 15px;
            border: 4px solid #000;
            margin-bottom: 30px;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.3);
        }

        .badge-header h4 {
            font-family: 'Press Start 2P', monospace;
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        .badge-pfp {
            width: 160px;
            height: 160px;
            border: 6px solid #000;
            margin: 0 auto 25px;
            display: block;
            box-shadow: 6px 6px 0 rgba(0,0,0,0.5);
            object-fit: cover;
            image-rendering: pixelated;
        }

        .audio-controls {
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 3000;
    display: flex;
    align-items: center;
    gap: 10px;
    background: rgba(218, 41, 28, 0.95);
    padding: 10px 15px;
    border: 4px solid #000;
    box-shadow: 4px 4px 0 rgba(0,0,0,0.5);
}

.audio-btn {
    background: #FFBC0D;
    border: 3px solid #000;
    color: #000;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 1.2rem;
    padding: 0;
    box-shadow: 3px 3px 0 rgba(0,0,0,0.3);
}

.audio-btn:hover {
    transform: translate(2px, 2px);
    box-shadow: 1px 1px 0 rgba(0,0,0,0.3);
}

.audio-btn:active {
    transform: translate(3px, 3px);
    box-shadow: none;
}

.volume-slider {
    width: 100px;
    height: 8px;
    background: #000;
    outline: none;
    border: 2px solid #000;
    cursor: pointer;
    -webkit-appearance: none;
}

.volume-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    background: #FFBC0D;
    border: 3px solid #000;
    cursor: pointer;
}

.volume-slider::-moz-range-thumb {
    width: 20px;
    height: 20px;
    background: #FFBC0D;
    border: 3px solid #000;
    cursor: pointer;
}

@media (max-width: 768px) {
    .audio-controls {
        top: 10px;
        left: 10px;
        padding: 8px 12px;
    }
    
    .audio-btn {
        width: 35px;
        height: 35px;
        font-size: 1rem;
    }
    
    .volume-slider {
        width: 80px;
    }
}

        .badge h3 {
            font-family: 'Press Start 2P', monospace;
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #FFBC0D;
        }

        .badge .title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-transform: uppercase;
            font-family: 'VT323', monospace;
            font-weight: 700;
            letter-spacing: 2px;
        }

        .badge-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 25px;
        }

        .badge-detail {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border: 3px solid #FFBC0D;
        }

        .badge-detail-label {
            font-size: 0.7rem;
            font-family: 'Press Start 2P', monospace;
            opacity: 0.9;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .badge-detail-value {
            font-size: 1.2rem;
            font-family: 'VT323', monospace;
            font-weight: 700;
        }

        .action-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .testimonials-section {
            margin-top: 80px;
            background: white;
            border: 8px solid #000;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            padding: 40px 30px;
            position: relative;
            overflow: hidden;
        }

        .testimonials-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 6px dashed #000;
        }

        .testimonials-header h2 {
            font-family: 'Press Start 2P', monospace;
            font-size: 2rem;
            color: #DA291C;
            margin-bottom: 10px;
        }

        .testimonials-header p {
            font-family: 'VT323', monospace;
            font-size: 1.5rem;
            color: #000;
        }

        .testimonials-wrapper {
            position: relative;
            overflow: hidden;
        }

        .testimonials-track {
            display: flex;
            gap: 30px;
            transition: transform 0.5s ease;
        }

        .testimonial-card {
            min-width: 350px;
            background: #f9f9f9;
            border: 6px solid #000;
            padding: 25px;
            box-shadow: 6px 6px 0 rgba(0,0,0,0.2);
            flex-shrink: 0;
        }

        .testimonial-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 4px dashed #DA291C;
        }

        .testimonial-img {
            width: 60px;
            height: 60px;
            border: 4px solid #000;
            object-fit: cover;
            image-rendering: pixelated;
        }

        .testimonial-info h4 {
            font-family: 'Press Start 2P', monospace;
            color: #DA291C;
            font-size: 0.8rem;
            margin-bottom: 5px;
        }

        .testimonial-info p {
            font-family: 'VT323', monospace;
            font-size: 1.1rem;
            color: #666;
        }

        .testimonial-text {
            font-family: 'VT323', monospace;
            font-size: 1.2rem;
            color: #333;
            line-height: 1.6;
        }

        .testimonial-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: #DA291C;
            color: #FFBC0D;
            border: 4px solid #000;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-family: 'Press Start 2P', monospace;
            font-size: 1.5rem;
            z-index: 10;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.3);
        }

        .testimonial-nav:hover {
            background: #c41e17;
        }

        .testimonial-nav.prev {
            left: 10px;
        }

        .testimonial-nav.next {
            right: 10px;
        }

        .testimonial-dots {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 25px;
        }

        .testimonial-dot {
            width: 12px;
            height: 12px;
            background: #ccc;
            border: 3px solid #000;
            cursor: pointer;
        }

        .testimonial-dot.active {
            background: #DA291C;
        }

        .leaderboard-section {
            margin-top: 80px;
            background: white;
            border: 8px solid #000;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            padding: 40px 30px;
        }

        .leaderboard-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 6px dashed #000;
        }

        .leaderboard-header h2 {
            font-family: 'Press Start 2P', monospace;
            font-size: 2rem;
            color: #DA291C;
            margin-bottom: 10px;
        }

        .leaderboard-header p {
            font-family: 'VT323', monospace;
            font-size: 1.5rem;
            color: #000;
        }

        .leaderboard-list {
            max-width: 600px;
            margin: 0 auto;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px;
            background: #f9f9f9;
            border: 4px solid #000;
            margin-bottom: 15px;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.1);
        }

        .leaderboard-item.top-3 {
            background: #FFBC0D;
            border-width: 6px;
            box-shadow: 6px 6px 0 rgba(0,0,0,0.3);
        }

        .leaderboard-rank {
            font-family: 'Press Start 2P', monospace;
            color: #DA291C;
            font-size: 1.5rem;
            min-width: 60px;
        }

        .leaderboard-name {
            flex: 1;
            font-family: 'VT323', monospace;
            font-size: 1.4rem;
            color: #333;
        }

        .leaderboard-score {
            font-family: 'Press Start 2P', monospace;
            color: #DA291C;
            font-size: 1.2rem;
        }

        .employee-chat {
            margin-top: 80px;
            background: white;
            border: 8px solid #000;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            padding: 30px;
            margin-bottom: 80px;
        }

        .chat-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 6px dashed #000;
        }

        .chat-header h2 {
            font-family: 'Press Start 2P', monospace;
            font-size: 2rem;
            color: #DA291C;
            margin-bottom: 10px;
        }

        .chat-header p {
            font-family: 'VT323', monospace;
            font-size: 1.5rem;
            color: #000;
        }

        .chat-box {
            background: #f5f5f5;
            border: 4px solid #000;
            height: 400px;
            overflow-y: auto;
            padding: 20px;
            margin-bottom: 20px;
        }

        .chat-message {
            margin-bottom: 15px;
            padding: 12px;
            background: white;
            border: 3px solid #000;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chat-message-author {
            font-family: 'Press Start 2P', monospace;
            font-size: 0.8rem;
            color: #DA291C;
            margin-bottom: 8px;
        }

        .chat-message-text {
            font-family: 'VT323', monospace;
            font-size: 1.2rem;
            color: #333;
            word-wrap: break-word;
        }

        .chat-message-time {
            font-family: 'VT323', monospace;
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
            text-align: right;
        }

        .chat-input-container {
            display: flex;
            gap: 15px;
        }

        .chat-input-container input {
            flex: 1;
            padding: 15px;
            font-size: 1.2rem;
            border: 4px solid #000;
            font-family: 'VT323', monospace;
            background: #fff;
        }

        .chat-input-container button {
            padding: 15px 30px;
            font-size: 1rem;
        }

        .earnings-divider {
            margin: 80px 0;
            padding: 60px 40px;
        }

        .earnings-title {
            font-family: 'Press Start 2P', monospace;
            font-size: 2rem;
            color: #DA291C;
            margin-bottom: 40px;
            text-align: center;
            text-shadow: 4px 4px 0 #000;
        }

        .earnings-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .earnings-stat {
            background: #DA291C;
            border: 8px solid #000;
            padding: 30px 20px;
            text-align: center;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            position: relative;
        }

        .earnings-stat::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 4px dashed #FFBC0D;
            pointer-events: none;
        }

        .earnings-stat-label {
            font-family: 'Press Start 2P', monospace;
            font-size: 0.75rem;
            color: #FFBC0D;
            margin-bottom: 20px;
            letter-spacing: 1px;
            font-weight: bold;
        }

        .earnings-stat-value {
            font-family: 'Press Start 2P', monospace;
            font-size: 3rem;
            color: #fff;
            font-weight: bold;
            text-shadow: 4px 4px 0 rgba(0,0,0,0.5);
        }

        .earnings-message {
            background: #DA291C;
            border: 8px solid #000;
            padding: 40px;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            position: relative;
        }

        .earnings-message::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            border: 4px dashed #FFBC0D;
            pointer-events: none;
        }

        .earnings-message h3 {
            font-family: 'Press Start 2P', monospace;
            font-size: 1.5rem;
            color: #FFBC0D;
            margin-bottom: 25px;
            text-align: center;
            text-shadow: 3px 3px 0 rgba(0,0,0,0.5);
        }

        .earnings-message p {
            font-family: 'VT323', monospace;
            font-size: 1.5rem;
            color: #fff;
            line-height: 1.8;
            text-align: center;
        }

        .mcnomics-section {
            margin-top: 80px;
            background: white;
            border: 8px solid #000;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            padding: 30px;
        }

        .mcnomics-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 6px dashed #000;
        }

        .mcnomics-header h2 {
            font-family: 'Press Start 2P', monospace;
            font-size: 2rem;
            color: #DA291C;
            margin-bottom: 10px;
        }

        .mcnomics-header p {
            font-family: 'VT323', monospace;
            font-size: 1.5rem;
            color: #000;
        }

        .chart-container {
            width: 100%;
            height: 600px;
            border: 4px solid #000;
        }

        .chart-container iframe {
            width: 100%;
            height: 100%;
            display: block;
        }

        .employee-wall {
            margin-top: 80px;
        }

        .wall-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .wall-header h2 {
            font-family: 'Press Start 2P', monospace;
            font-size: 2rem;
            color: #DA291C;
            margin-bottom: 10px;
        }

        .wall-header p {
            font-family: 'VT323', monospace;
            color: #000;
            font-size: 1.5rem;
        }

        .wall-search {
            max-width: 500px;
            margin: 0 auto 40px;
        }

        .wall-search input {
            width: 100%;
        }

        .employee-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .employee-card {
            background: white;
            border: 6px solid #000;
            padding: 20px;
            text-align: center;
            box-shadow: 6px 6px 0 rgba(0,0,0,0.2);
            transition: transform 0.1s ease;
            cursor: pointer;
            position: relative;
        }

        .employee-card:hover {
            transform: translate(3px, 3px);
            box-shadow: 3px 3px 0 rgba(0,0,0,0.2);
        }

        .employee-card:active {
            transform: translate(6px, 6px);
            box-shadow: none;
        }

        .employee-card-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border: 8px solid #000;
            box-shadow: 12px 12px 0 rgba(0,0,0,0.5);
            padding: 40px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 1000;
        }

        .employee-card-popup.active {
            display: block;
        }

        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 999;
        }

        .popup-overlay.active {
            display: block;
        }

        .popup-close {
            position: absolute;
            top: 10px;
            right: 10px;
            font-family: 'Press Start 2P', monospace;
            font-size: 1.5rem;
            color: #DA291C;
            cursor: pointer;
            background: #FFBC0D;
            border: 4px solid #000;
            padding: 10px 15px;
        }

        .popup-close:hover {
            background: #ffa500;
        }

        .employee-card img {
            width: 100px;
            height: 100px;
            border: 4px solid #000;
            margin-bottom: 15px;
            object-fit: cover;
            image-rendering: pixelated;
        }

        .employee-card h4 {
            font-family: 'Press Start 2P', monospace;
            color: #DA291C;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .employee-card p {
            color: #333;
            font-size: 1.1rem;
            font-family: 'VT323', monospace;
            font-weight: 600;
        }

        .referral-box {
            margin-top: 40px;
            background: white;
            border: 8px solid #000;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.3);
            padding: 30px;
            text-align: center;
        }

        .referral-box h3 {
            font-family: 'Press Start 2P', monospace;
            color: #DA291C;
            font-size: 1.2rem;
            margin-bottom: 15px;
        }

        .referral-link-container {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .referral-link-container input {
            flex: 1;
            min-width: 300px;
        }

        footer {
            background: #DA291C;
            color: #FFBC0D;
            padding: 30px 20px;
            margin-top: 80px;
            border-top: 8px solid #000;
            text-align: center;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            font-family: 'VT323', monospace;
            font-size: 1.3rem;
        }

        .footer-content p {
            margin-bottom: 15px;
        }

        .footer-links {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: #FFBC0D;
            text-decoration: none;
            font-family: 'Press Start 2P', monospace;
            font-size: 0.8rem;
            padding: 10px 20px;
            border: 4px solid #000;
            background: rgba(0,0,0,0.3);
            transition: all 0.1s ease;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.3);
        }

        .footer-links a:hover {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0 rgba(0,0,0,0.3);
        }

        .footer-bottom {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 4px dashed rgba(255, 188, 13, 0.5);
            font-size: 1.1rem;
            font-family: 'Press Start 2P', monospace;
            font-size: 0.7rem;
        }

        /* PFP Modal Styles - Must be BEFORE media queries */
        .pfp-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            overflow-y: auto;
        }

        .pfp-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .pfp-modal-content {
    background: #FFC72C;
    border: 8px solid #000;
    max-width: 600px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 12px 12px 0 rgba(0,0,0,0.5);
    position: relative;
}

        .pfp-modal-header {
            background: #DA291C;
            padding: 20px 30px;
            border-bottom: 6px solid #000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .pfp-modal-header h2 {
            font-family: 'Press Start 2P', monospace;
            color: #FFBC0D;
            font-size: 1.5rem;
            text-shadow: 3px 3px 0 #000;
        }

        .pfp-close {
            background: #FFBC0D;
            border: 4px solid #000;
            color: #DA291C;
            font-family: 'Press Start 2P', monospace;
            font-size: 1.5rem;
            padding: 10px 15px;
            cursor: pointer;
            line-height: 1;
        }

        .pfp-close:hover {
            background: #ffa500;
        }

        .pfp-modal-body {
            padding: 40px 30px;
        }

        .pfp-upload-section {
            text-align: center;
            margin-bottom: 30px;
        }

        .pfp-upload-btn {
            position: relative;
            display: inline-block;
        }

        .pfp-upload-btn input[type="file"] {
            display: none;
        }

        .pfp-upload-label {
            display: inline-block;
            padding: 20px 40px;
            background: #DA291C;
            color: #FFBC0D;
            border: 4px solid #000;
            font-family: 'Press Start 2P', monospace;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 6px 6px 0 rgba(0,0,0,0.4);
        }

        .pfp-upload-label:hover {
            transform: translate(3px, 3px);
            box-shadow: 3px 3px 0 rgba(0,0,0,0.4);
        }

        .pfp-canvas-container {
    background: white;
    border: 8px solid #000;
    width: 100%;
    max-width: 400px;
    height: 400px;
    margin: 0 auto 20px;
    position: relative;
    overflow: hidden;
    box-shadow: 6px 6px 0 rgba(0,0,0,0.3);
    display: block;
}
        
        .pfp-canvas {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    display: block;
}

        .pfp-layer {
            position: absolute;
            cursor: move;
            user-select: none;
        }

        .pfp-layer img {
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .pfp-layer.active {
            outline: 3px dashed #DA291C;
            outline-offset: 5px;
        }

        .pfp-resize-handle {
            position: absolute;
            bottom: -10px;
            right: -10px;
            width: 20px;
            height: 20px;
            background: #FFBC0D;
            border: 3px solid #000;
            cursor: nwse-resize;
        }

        .pfp-controls {
            background: white;
            border: 6px solid #000;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.2);
        }

        .pfp-controls h3 {
            font-family: 'Press Start 2P', monospace;
            color: #DA291C;
            font-size: 1rem;
            margin-bottom: 20px;
        }

        .pfp-backgrounds {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .pfp-bg-option {
            aspect-ratio: 1;
            border: 4px solid #000;
            cursor: pointer;
            transition: transform 0.1s;
            position: relative;
        }

        .pfp-bg-option:hover {
            transform: scale(1.05);
        }

        .pfp-bg-option.active {
            border-color: #DA291C;
            border-width: 6px;
        }

        .pfp-layer-controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .pfp-layer-btn {
            flex: 1;
            min-width: 120px;
            padding: 12px 20px;
            background: #DA291C;
            color: #FFBC0D;
            border: 4px solid #000;
            font-family: 'Press Start 2P', monospace;
            font-size: 0.7rem;
            cursor: pointer;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.3);
        }

        .pfp-layer-btn:hover {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0 rgba(0,0,0,0.3);
        }

        .pfp-layer-btn.active {
            background: #FFBC0D;
            color: #DA291C;
        }

        .pfp-download-btn {
            width: 100%;
            padding: 20px;
            background: #27ae60;
            color: white;
            border: 4px solid #000;
            font-family: 'Press Start 2P', monospace;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 6px 6px 0 rgba(0,0,0,0.4);
            margin-top: 20px;
        }

        .pfp-download-btn:hover {
            transform: translate(3px, 3px);
            box-shadow: 3px 3px 0 rgba(0,0,0,0.4);
        }

        .pfp-loading {
            text-align: center;
            padding: 40px;
        }

        .pfp-loading p {
            font-family: 'Press Start 2P', monospace;
            color: #DA291C;
            font-size: 0.9rem;
            margin-top: 20px;
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            .logo {
                font-size: 28px;
            }

            .nav-menu {
                gap: 10px;
            }

            .nav-menu a {
                font-size: 0.6rem;
                padding: 8px 12px;
            }

            .hero h1 {
                font-size: 1.8rem;
            }

            .hero p {
                font-size: 1.2rem;
            }

            .app-header {
                flex-direction: column;
            }

            input[type="text"] {
                min-width: 100%;
            }

            button {
                font-size: 0.9rem;
                padding: 15px 30px;
            }

            .application {
                padding: 30px 20px;
            }

            .user-info h2 {
                font-size: 1rem;
            }

            .app-title h3 {
                font-size: 1rem;
            }

            .form-section label {
                font-size: 0.7rem;
            }

            .badge h3 {
                font-size: 1.2rem;
            }

            .badge-header h4 {
                font-size: 0.7rem;
            }

            .wall-header h2 {
                font-size: 1.3rem;
            }

            .employee-card h4 {
                font-size: 0.7rem;
            }

            .footer-links a {
                font-size: 0.6rem;
                padding: 8px 15px;
            }

            .footer-bottom {
                font-size: 0.5rem;
            }

            .pfp-canvas-container {
                height: 300px;
            }
            
            .pfp-backgrounds {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .pfp-modal-header h2 {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="audio-controls">
    <button id="audioToggle" class="audio-btn" onclick="toggleAudio()">
        <span id="audioIcon">üîä</span>
    </button>
    <input type="range" id="volumeSlider" class="volume-slider" min="0" max="100" value="50" oninput="changeVolume(this.value)">
</div>
        <div class="header-main">
            <div class="header-main-content">
                <div class="logo">M</div>
                <nav>
                    <ul class="nav-menu">
                        <li><a href="#home">Home</a></li>
                        <li><a href="https://twitter.com" target="_blank">Twitter</a></li>
                        <li><a href="https://pump.fun" target="_blank">Pump.fun</a></li>
                        <li><a href="#" onclick="openPfpModal(); return false;">McDonald's PFP</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <div class="hero">
        <h1>McDONALDS.FUN</h1>
        <div class="hero-tagline" id="heroTagline">Loading...</div>
        <div class="hero-subtitle">‚ñº ENTER TWITTER/X @ TO START YOUR APPLICATION BELOW ‚ñº</div>
    </div>

    <div class="container">
        <div class="input-section">
            <form id="applicationForm">
                <div class="input-group">
                    <input 
                        type="text" 
                        id="username" 
                        placeholder="Enter Twitter @ (e.g., elonmusk)"
                        required
                    />
                    <button type="submit" id="submitBtn">
                        Apply Now
                    </button>
                </div>
            </form>
        </div>

        <div id="loading" class="loading" style="display: none;">
            <div class="spinner"></div>
            <p>Reviewing your qualifications...</p>
        </div>

        <div id="results" class="results">
            <div class="application-wrapper">
                <div id="applicationCard" class="application">
                    <div class="app-title">
                        <h3>Employment Application</h3>
                    </div>

                    <div class="app-header">
                        <img id="appPfp" src="" alt="Profile" class="pfp" />
                        <div class="user-info">
                            <h2 id="appName">Name</h2>
                            <p id="appBio">Bio</p>
                        </div>
                    </div>

                    <div class="form-section">
                        <label>Position Applied For:</label>
                        <div class="value" id="position">Crew Member</div>
                    </div>

                    <div class="form-section">
                        <label>Why do you want to work at McDonald's?</label>
                        <div class="value" id="whyMcdonalds"></div>
                    </div>

                    <div class="form-section">
                        <label>Previous Experience:</label>
                        <div class="value" id="experience"></div>
                    </div>

                    <div class="form-section">
                        <label>Special Skills:</label>
                        <div class="value" id="skills"></div>
                    </div>

                    <div class="form-section">
                        <label>Available to Start:</label>
                        <div class="value" id="startDate">Immediately</div>
                    </div>

                    <div class="form-section">
                        <label>Manager's Additional Comments:</label>
                        <div class="value" id="comments"></div>
                    </div>
                </div>
            </div>

            <div id="badgeContainer" class="badge-container">
                <div id="badgeCard" class="badge">
                    <div class="badge-header">
                        <h4>Official Employee Badge</h4>
                    </div>
                    <img id="badgePfp" src="" alt="Employee" class="badge-pfp" />
                    <h3 id="badgeName">Name</h3>
                    <div class="title">CREW MEMBER</div>
                    <div class="badge-details">
                        <div class="badge-detail">
                            <div class="badge-detail-label">Employee ID</div>
                            <div class="badge-detail-value" id="employeeId">#000000</div>
                        </div>
                        <div class="badge-detail">
                            <div class="badge-detail-label">Member Since</div>
                            <div class="badge-detail-value" id="since">2025</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button onclick="downloadApplication()">
                    Download Application
                </button>
                <button onclick="downloadBadge()">
                    Download Badge
                </button>
                <button onclick="shareToTwitter()">
                    Share to Twitter
                </button>
            </div>

            <div class="referral-box" id="referralBox" style="display: none;">
                <h3>YOUR REFERRAL LINK</h3>
                <p style="color: #FFBC0D; font-family: 'VT323', monospace; font-size: 1.3rem;">Share this link to earn points!</p>
                <div class="referral-link-container">
                    <input type="text" id="referralLink" readonly />
                    <button onclick="copyReferralLink()">COPY</button>
                </div>
            </div>
        </div>

        <div class="testimonials-section">
            <div class="testimonials-header">
                <h2>EMPLOYEE REVIEWS</h2>
                <p>Hear from our satisfied crew members!</p>
            </div>

            <div class="testimonials-wrapper">
                <div class="testimonial-nav prev" onclick="prevTestimonial()">‚óÑ</div>
                <div class="testimonial-nav next" onclick="nextTestimonial()">‚ñ∫</div>
                <div class="testimonials-track" id="testimonialsTrack">
                </div>
            </div>
            <div class="testimonial-dots" id="testimonialDots"></div>
        </div>

        <div class="leaderboard-section">
            <div class="leaderboard-header">
                <h2>EMPLOYEE OF THE MONTH</h2>
                <p>Top recruiters earn legendary status!</p>
            </div>

            <div class="leaderboard-list" id="leaderboardList">
                <p style="text-align: center; font-family: 'VT323', monospace; font-size: 1.3rem;">Loading leaderboard...</p>
            </div>
        </div>

        <div class="employee-wall">
            <div class="wall-header">
                <h2>EMPLOYEE WALL</h2>
                <p>Meet our newest crew members!</p>
            </div>

            <div class="wall-search">
                <input 
                    type="text" 
                    id="searchEmployee" 
                    placeholder="Search employees by name..."
                />
            </div>

            <div class="employee-grid" id="employeeGrid">
            </div>
        </div>

        <div class="employee-chat">
            <div class="chat-header">
                <h2>EMPLOYEES CHAT</h2>
                <p>Talk with fellow crew members!</p>
            </div>

            <div class="chat-box" id="chatBox">
            </div>

            <div class="chat-input-container">
                <input 
                    type="text" 
                    id="chatInput" 
                    placeholder="Type your message..."
                    maxlength="200"
                />
                <button onclick="sendMessage()">SEND</button>
            </div>
        </div>

        <div class="earnings-divider">
            <div class="earnings-title">TODAY'S EARNINGS REPORT</div>
            
            <div class="earnings-stats">
                <div class="earnings-stat">
                    <div class="earnings-stat-label">APPLICATIONS</div>
                    <div class="earnings-stat-value" id="applicationsCount">0</div>
                </div>
                <div class="earnings-stat">
                    <div class="earnings-stat-label">EMPLOYEES HIRED</div>
                    <div class="earnings-stat-value" id="employeesCount">0</div>
                </div>
                <div class="earnings-stat">
                    <div class="earnings-stat-label">TRENCHOORS ESCAPED</div>
                    <div class="earnings-stat-value" id="trenchoorsCount">0</div>
                </div>
                <div class="earnings-stat">
                    <div class="earnings-stat-label">ACTIVE CREW</div>
                    <div class="earnings-stat-value" id="activeCrewCount">0</div>
                </div>
            </div>

            <div class="earnings-message">
                <h3>THE TRENCHES ARE DEAD</h3>
                <p>
                    Stop staring at red candles and start flipping burgers. McDonald's is hiring TODAY and we're the greatest employer in the game. 
                    Your degen skills? We want them. Chart reading? Perfect for monitoring fry timers. Diamond hands? Great for holding hot trays. 
                    Late night trading sessions? We've got the night shift covered. Join the crew and put your hard-earned skills to work where they actually matter. 
                    Benefits include: stable income, free meals, and no more watching your portfolio bleed. Apply now and leave the trenches behind forever.
                </p>
            </div>
        </div>

        <div class="mcnomics-section">
            <div class="mcnomics-header">
                <h2>McNOMICS</h2>
                <p>Track the value of your employment!</p>
            </div>

            <div class="chart-container">
                <iframe 
                    src="https://birdeye.so/tv-widget/pumpCmXqMfrsAkQ5r49WcJnRayYRqmXz6ae8H7H9Dfn?chain=solana&viewMode=pair&chartInterval=1&chartType=Candle&chartTimezone=Europe%2FLondon&chartLeftToolbar=show&theme=dark&cssCustomProperties=--tv-color-platform-background%3A%23ffc72c&cssCustomProperties=--tv-color-pane-background%3A%23ffc72c&chartOverrides=paneProperties.backgroundGradientStartColor%3Argba%2848%2C+48%2C+48%2C+1%29&chartOverrides=paneProperties.backgroundType%3Asolid" 
                    frameborder="0" 
                    allowfullscreen>
                </iframe>
            </div>
        </div>
    </div>

    <div class="popup-overlay" id="popupOverlay" onclick="closeEmployeePopup()"></div>
    <div class="employee-card-popup" id="employeePopup">
        <div class="popup-close" onclick="closeEmployeePopup()">‚úï</div>
        <div id="popupContent"></div>
    </div>

    <footer>
        <div class="footer-content">
            <p>üçî LEAVING THE TRENCHES? JOIN THE CREW! üüü</p>
            <div class="footer-links">
                <a href="https://twitter.com" target="_blank">TWITTER</a>
                <a href="https://pump.fun" target="_blank">PUMP.FUN</a>
                <a href="#home">HOME</a>
            </div>
            <div class="footer-bottom">
                <p>Copyright ¬© 2025 Mcdonalds.fun. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- PFP Creator Modal -->
    <div class="pfp-modal" id="pfpModal">
        <div class="pfp-modal-content">
            <div class="pfp-modal-header">
                <h2>CREATE YOUR MCDONALD'S PFP</h2>
                <div class="pfp-close" onclick="closePfpModal()">‚úï</div>
            </div>
            <div class="pfp-modal-body">
                <div class="pfp-upload-section" id="uploadSection">
                    <div class="pfp-upload-btn">
                        <input type="file" id="pfpUpload" accept="image/*" onchange="handlePfpUpload(event)">
                        <label for="pfpUpload" class="pfp-upload-label">
                            UPLOAD YOUR PFP
                        </label>
                    </div>
                    <p style="font-family: 'VT323', monospace; font-size: 1.2rem; margin-top: 15px; color: #000;">
                        Upload an image to get started!
                    </p>
                </div>

                <div id="loadingSection" class="pfp-loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>Removing background...</p>
                </div>

                <div id="editorSection" style="display: none;">
                    <div class="pfp-canvas-container" id="canvasContainer">
                        <div id="pfpCanvas" class="pfp-canvas">
                        </div>
                    </div>

                    <div class="pfp-controls">
                        <h3>CHOOSE BACKGROUND</h3>
                        <div class="pfp-backgrounds" id="backgroundOptions">
                        </div>
                    </div>

                    <div class="pfp-controls">
                        <h3>CUSTOMIZE LAYERS</h3>
                        <div class="pfp-layer-controls">
    <button class="pfp-layer-btn active" onclick="toggleLayer('hat')">TOGGLE HAT</button>
    <button class="pfp-layer-btn active" onclick="toggleLayer('shirt')">TOGGLE SHIRT</button>
    <button class="pfp-layer-btn" onclick="flipHat()">FLIP HAT</button>
    <button class="pfp-layer-btn" onclick="resetLayers()">RESET ALL</button>
</div>
                    </div>

                    <button class="pfp-download-btn" onclick="downloadPfp()">
                        DOWNLOAD PFP
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBL_Abt3EEibFA-67ypLx_QwdIv9lY3xds",
            authDomain: "polymarket-675a5.firebaseapp.com",
            databaseURL: "https://polymarket-675a5-default-rtdb.firebaseio.com",
            projectId: "polymarket-675a5",
            storageBucket: "polymarket-675a5.firebasestorage.app",
            messagingSenderId: "763899221788",
            appId: "1:763899221788:web:3b6a2e86950e88c8b40cd9",
            measurementId: "G-6QN30DZS8Z"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const messagesRef = database.ref('messages');

        const form = document.getElementById('applicationForm');
        const loading = document.getElementById('loading');
        const results = document.getElementById('results');
        const submitBtn = document.getElementById('submitBtn');
        const employeeGrid = document.getElementById('employeeGrid');
        const searchInput = document.getElementById('searchEmployee');
        const chatBox = document.getElementById('chatBox');
        const chatInput = document.getElementById('chatInput');

        const taglines = [
            "From trenches to success, one burger at a time!",
            "We're not just hiring, we're saving lives!",
            "Your bags are heavy, but our trays are heavier!",
            "Diamond hands? Try holding a McFlurry machine!",
            "Chart watching skills transfer to fry timers!",
            "Leave the volatility, embrace the stability!"
        ];
        
        let taglineIndex = 0;
        
        function rotateTagline() {
            const taglineEl = document.getElementById('heroTagline');
            taglineEl.style.opacity = '0';
            setTimeout(() => {
                taglineEl.textContent = taglines[taglineIndex];
                taglineEl.style.opacity = '1';
                taglineIndex = (taglineIndex + 1) % taglines.length;
            }, 300);
        }
        
        document.getElementById('heroTagline').textContent = taglines[0];
        setInterval(rotateTagline, 4000);

        let employees = JSON.parse(localStorage.getItem('mcdonalds_employees') || '[]');

        const testimonialQuotes = [
            "Best decision of my life. Went from watching charts 24/7 to actually making consistent money.",
            "Finally left the trenches. My mental health has never been better and I can actually afford rent.",
            "I used to ape into rugs, now I clean them. McDonald's saved me. 10/10 would recommend.",
            "The ice cream machine is more reliable than my old portfolio. Should've joined sooner.",
            "Went from diamond hands to holding a spatula. Best career change I ever made.",
            "From trading shitcoins to serving Big Macs. At least the job security is real.",
            "No more rug pulls, just french fries. Living the dream tbh.",
            "I make more flipping burgers than I ever made flipping NFTs. No cap.",
            "The only thing pumping now is the McFlurry machine. And I'm okay with that.",
            "Left the degen life behind. Now I'm a professional burger architect."
        ];

        displayEmployees();
        loadChatMessages();
        animateEarnings();
        loadLeaderboard();
        loadTestimonials();

        const urlParams = new URLSearchParams(window.location.search);
        const referredBy = urlParams.get('ref');

        function loadTestimonials() {
            const track = document.getElementById('testimonialsTrack');
            
            const testimonialEmployees = employees.slice(-10).reverse();
            
            if (testimonialEmployees.length === 0) {
                track.innerHTML = `
                    <div class="testimonial-card">
                        <div class="testimonial-header">
                            <img src="data:image/svg+xml,%3Csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3E%3Crect fill='%23DA291C' width='60' height='60'/%3E%3Ctext x='30' y='40' font-size='30' text-anchor='middle' fill='%23FFBC0D' font-family='Arial'%3Eüçî%3C/text%3E%3C/svg%3E" class="testimonial-img" alt="Employee" />
                            <div class="testimonial-info">
                                <h4>BE THE FIRST</h4>
                                <p>Future Employee</p>
                            </div>
                        </div>
                        <div class="testimonial-text">
                            Apply now and be the first employee featured in our testimonials! Leave the trenches behind and join the crew.
                        </div>
                    </div>
                `.repeat(3);
                return;
            }

            const testimonials = testimonialEmployees.map(emp => {
                const randomQuote = testimonialQuotes[Math.floor(Math.random() * testimonialQuotes.length)];
                return `
                    <div class="testimonial-card">
                        <div class="testimonial-header">
                            <img src="${emp.pfpUrl}" class="testimonial-img" alt="${escapeHtml(emp.name)}" />
                            <div class="testimonial-info">
                                <h4>${escapeHtml(emp.name.toUpperCase())}</h4>
                                <p>${escapeHtml(emp.position)}</p>
                            </div>
                        </div>
                        <div class="testimonial-text">
                            "${randomQuote}"
                        </div>
                    </div>
                `;
            }).join('');

            track.innerHTML = testimonials;
        }

        function loadLeaderboard() {
            fetch('/api/leaderboard')
                .then(res => res.json())
                .then(data => {
                    displayLeaderboard(data.leaderboard || []);
                })
                .catch(err => {
                    console.error('Failed to load leaderboard:', err);
                    document.getElementById('leaderboardList').innerHTML = 
                        '<p style="text-align: center; font-family: \'VT323\', monospace; font-size: 1.3rem;">No recruiters yet. Be the first!</p>';
                });
        }

        function displayLeaderboard(leaderboard) {
            const list = document.getElementById('leaderboardList');
            if (leaderboard.length === 0) {
                list.innerHTML = '<p style="text-align: center; font-family: \'VT323\', monospace; font-size: 1.3rem;">No recruiters yet. Be the first!</p>';
                return;
            }

            list.innerHTML = leaderboard.map((user, index) => `
                <div class="leaderboard-item ${index < 3 ? 'top-3' : ''}">
                    <div class="leaderboard-rank">#${index + 1}</div>
                    <div class="leaderboard-name">${escapeHtml(user.name)}</div>
                    <div class="leaderboard-score">${user.referrals} REFS</div>
                </div>
            `).join('');
        }

        function closeEmployeePopup() {
            document.getElementById('popupOverlay').classList.remove('active');
            document.getElementById('employeePopup').classList.remove('active');
        }

        function showEmployeeApplication(employee) {
            const popup = document.getElementById('employeePopup');
            const overlay = document.getElementById('popupOverlay');
            const content = document.getElementById('popupContent');

            content.innerHTML = `
                <div style="text-align: center; margin-bottom: 30px;">
                    <img src="${employee.pfpUrl}" style="width: 120px; height: 120px; border: 6px solid #000; object-fit: cover; margin-bottom: 15px;" />
                    <h2 style="font-family: 'Press Start 2P', monospace; color: #DA291C; font-size: 1.3rem; margin-bottom: 10px;">${escapeHtml(employee.name)}</h2>
                    <p style="font-family: 'VT323', monospace; font-size: 1.3rem; color: #666;">${escapeHtml(employee.position)}</p>
                    <p style="font-family: 'VT323', monospace; font-size: 1.1rem; color: #999; margin-top: 5px;">Employee #${employee.employeeId}</p>
                </div>
            `;

            overlay.classList.add('active');
            popup.classList.add('active');
        }

        function animateEarnings() {
            const employeeCount = employees.length;
            const applicationsCount = employeeCount + 32;
            
            const targets = {
                applicationsCount: applicationsCount,
                employeesCount: employeeCount,
                trenchoorsCount: employeeCount,
                activeCrewCount: employeeCount
            };

            Object.keys(targets).forEach(id => {
                const element = document.getElementById(id);
                const target = targets[id];
                const duration = 2000;
                const increment = target / (duration / 16);
                let current = 0;

                const updateCounter = () => {
                    current += increment;
                    if (current < target) {
                        element.textContent = Math.floor(current);
                        requestAnimationFrame(updateCounter);
                    } else {
                        element.textContent = target;
                    }
                };

                updateCounter();
            });
        }

        function updateEarnings() {
            const employeeCount = employees.length;
            document.getElementById('applicationsCount').textContent = employeeCount + 32;
            document.getElementById('employeesCount').textContent = employeeCount;
            document.getElementById('trenchoorsCount').textContent = employeeCount;
            document.getElementById('activeCrewCount').textContent = employeeCount;
        }

        function loadChatMessages() {
            messagesRef.limitToLast(50).on('child_added', (snapshot) => {
                const message = snapshot.val();
                displayChatMessage(message);
            });
        }

        function displayChatMessage(message) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'chat-message';
            
            const time = new Date(message.timestamp).toLocaleTimeString('en-US', {
                hour: '2-digit',
                minute: '2-digit'
            });
            
            messageDiv.innerHTML = `
                <div class="chat-message-author">${escapeHtml(message.author)}</div>
                <div class="chat-message-text">${escapeHtml(message.text)}</div>
                <div class="chat-message-time">${time}</div>
            `;
            
            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function sendMessage() {
            const text = chatInput.value.trim();
            if (!text) return;

            let employeeId = localStorage.getItem('mcdonalds_employee_id');
            if (!employeeId) {
                employeeId = 'employee-' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('mcdonalds_employee_id', employeeId);
            }
            
            messagesRef.push({
                author: employeeId,
                text: text,
                timestamp: Date.now()
            });

            chatInput.value = '';
        }

        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function createPlaceholderPfp() {
            const canvas = document.createElement('canvas');
            canvas.width = 140;
            canvas.height = 140;
            const ctx = canvas.getContext('2d');
            
            ctx.fillStyle = '#DA291C';
            ctx.fillRect(0, 0, 140, 140);
            
            ctx.strokeStyle = '#FFBC0D';
            ctx.lineWidth = 8;
            ctx.strokeRect(4, 4, 132, 132);
            
            ctx.font = 'bold 60px Arial';
            ctx.fillStyle = '#FFBC0D';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('M', 70, 70);
            
            return canvas.toDataURL('image/png');
        }
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const username = document.getElementById('username').value.replace('@', '').trim();
            if (!username) return;

            loading.style.display = 'block';
            results.classList.remove('active');
            submitBtn.disabled = true;

            try {
                const response = await fetch('/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username })
                });

                if (!response.ok) throw new Error('Failed to generate application');

                const data = await response.json();
                
                const pfpUrl = data.profileImageUrl || createPlaceholderPfp();
                
                localStorage.setItem('mcdonalds_username', data.name);
                
                document.getElementById('appPfp').src = pfpUrl;
                document.getElementById('badgePfp').src = pfpUrl;
                document.getElementById('appName').textContent = data.name;
                document.getElementById('appBio').textContent = data.bio;
                document.getElementById('position').textContent = data.position;
                document.getElementById('whyMcdonalds').textContent = data.whyMcdonalds;
                document.getElementById('experience').textContent = data.experience;
                document.getElementById('skills').textContent = data.skills;
                document.getElementById('startDate').textContent = data.startDate;
                document.getElementById('comments').textContent = data.comments;
                document.getElementById('badgeName').textContent = data.name;
                document.getElementById('employeeId').textContent = `#${data.employeeId}`;
                document.getElementById('since').textContent = new Date().getFullYear();

                addEmployee({
                    name: data.name,
                    position: data.position,
                    employeeId: data.employeeId,
                    pfpUrl: pfpUrl
                });

                updateEarnings();
                loadTestimonials();

                loading.style.display = 'none';
                results.classList.add('active');

                setTimeout(() => {
                    document.getElementById('badgeContainer').classList.add('show');
                }, 500);

            } catch (error) {
                console.error('Error:', error);
                alert('Failed to generate application. Please try again.');
                loading.style.display = 'none';
            } finally {
                submitBtn.disabled = false;
            }
        });

        async function generateReferralLink(name, employeeId) {
            try {
                const response = await fetch('/api/generate-referral', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name, employeeId, referredBy })
                });

                const data = await response.json();
                const referralLink = `${window.location.origin}?ref=${data.referralCode}`;
                
                document.getElementById('referralLink').value = referralLink;
                document.getElementById('referralBox').style.display = 'block';
                
                localStorage.setItem('mcdonalds_referral_code', data.referralCode);
            } catch (error) {
                console.error('Failed to generate referral link:', error);
            }
        }

        function copyReferralLink() {
            const input = document.getElementById('referralLink');
            input.select();
            document.execCommand('copy');
            alert('Referral link copied! Share it to earn points!');
        }

        function addEmployee(employee) {
            const exists = employees.find(e => e.employeeId === employee.employeeId);
            if (!exists) {
                employees.unshift(employee);
                if (employees.length > 50) {
                    employees = employees.slice(0, 50);
                }
                localStorage.setItem('mcdonalds_employees', JSON.stringify(employees));
                displayEmployees();
            }
        }

        function displayEmployees(filter = '') {
            const filtered = filter 
                ? employees.filter(e => e.name.toLowerCase().includes(filter.toLowerCase()))
                : employees;

            employeeGrid.innerHTML = filtered.map(emp => `
                <div class="employee-card" onclick='showEmployeeApplication(${JSON.stringify(emp).replace(/'/g, "&#39;")})'>
                    <img src="${emp.pfpUrl}" alt="${emp.name}" />
                    <h4>${emp.name}</h4>
                    <p>${emp.position}</p>
                    <p style="font-size: 0.75rem; color: #999;">#${emp.employeeId}</p>
                </div>
            `).join('');

            if (filtered.length === 0) {
                employeeGrid.innerHTML = '<p style="text-align: center; grid-column: 1/-1; color: #666;">No employees found. Be the first to apply!</p>';
            }
        }

        searchInput.addEventListener('input', (e) => {
            displayEmployees(e.target.value);
        });

        async function downloadApplication() {
            const element = document.getElementById('applicationCard');
            const canvas = await html2canvas(element, {
                scale: 2,
                backgroundColor: '#ffffff'
            });
            
            const link = document.createElement('a');
            link.download = 'mcdonalds-application.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        async function downloadBadge() {
            const element = document.getElementById('badgeCard');
            const canvas = await html2canvas(element, {
                scale: 2,
                backgroundColor: null
            });
            
            const link = document.createElement('a');
            link.download = 'mcdonalds-badge.png';
            link.href = canvas.toDataURL();
            link.click();
        }

        function shareToTwitter() {
            const text = encodeURIComponent("I'm leaving the trenches and working for mcdonalds.fun - generate yours today!");
            const url = encodeURIComponent('https://mcdonalds.fun');
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
        }

        let currentTestimonial = 0;
        function nextTestimonial() {
            const track = document.getElementById('testimonialsTrack');
            const cards = track.children;
            if (cards.length > 0) {
                currentTestimonial = (currentTestimonial + 1) % cards.length;
                track.style.transform = `translateX(-${currentTestimonial * 380}px)`;
            }
        }

        function prevTestimonial() {
            const track = document.getElementById('testimonialsTrack');
            const cards = track.children;
            if (cards.length > 0) {
                currentTestimonial = currentTestimonial === 0 ? cards.length - 1 : currentTestimonial - 1;
                track.style.transform = `translateX(-${currentTestimonial * 380}px)`;
            }
        }

        // PFP Creator
const REMOVEBG_API_KEY = 'j2UGSY9jXh4nAe1g7XaeNqEo';

const backgrounds = [
    'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68ddac640a297fdcacc1c6e8_643643.png',
    'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68ddac6422d5b3270457e3b0_54532.png',
    'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68ddac64d358c7d5a9a031bd_654654.png',
    'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68ddac64a18594d3ad18e3e8_53223.png',
    'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68ddac644c624986561ad643_532.png',
    'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68ddac653f6338a40102c81c_64363.png',
    'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68ddac65d0016aee97130181_634563.png'
];

let pfpLayers = {
    background: null,
    photo: null,
    shirt: null,
    hat: null
};

let layerStates = {
    hat: true,
    shirt: true
};

let currentDragging = null;
let currentResizing = null;
let dragOffset = { x: 0, y: 0 };

function openPfpModal() {
    document.getElementById('pfpModal').classList.add('active');
    generateBackgroundOptions();
}

function closePfpModal() {
    document.getElementById('pfpModal').classList.remove('active');
    resetPfpCreator();
}

function resetPfpCreator() {
    document.getElementById('uploadSection').style.display = 'block';
    document.getElementById('editorSection').style.display = 'none';
    document.getElementById('pfpCanvas').innerHTML = '';
    pfpLayers = { background: null, photo: null, shirt: null, hat: null };
    layerStates = { hat: true, shirt: true };
}

function generateBackgroundOptions() {
    const container = document.getElementById('backgroundOptions');
    container.innerHTML = backgrounds.map((imageUrl, index) => `
        <div class="pfp-bg-option ${index === 0 ? 'active' : ''}" 
             style="background: url('${imageUrl}') center/cover"
             onclick="changeBackground('${imageUrl}', this)">
        </div>
    `).join('');
}

function changeBackground(imageUrl, element) {
    document.querySelectorAll('.pfp-bg-option').forEach(el => el.classList.remove('active'));
    element.classList.add('active');
    const canvas = document.getElementById('pfpCanvas');
    canvas.style.background = `url('${imageUrl}') center/cover`;
    canvas.style.backgroundSize = 'cover';
    canvas.style.backgroundPosition = 'center';
}

async function handlePfpUpload(event) {
    const file = event.target.files[0];
    if (!file) return;

    document.getElementById('uploadSection').style.display = 'none';
    document.getElementById('loadingSection').style.display = 'block';

    try {
        const formData = new FormData();
        formData.append('image_file', file);
        formData.append('size', 'auto');

        const response = await fetch('https://api.remove.bg/v1.0/removebg', {
            method: 'POST',
            headers: {
                'X-Api-Key': REMOVEBG_API_KEY
            },
            body: formData
        });

        if (!response.ok) throw new Error('Background removal failed');

        const blob = await response.blob();
        const imageUrl = URL.createObjectURL(blob);

        document.getElementById('loadingSection').style.display = 'none';
        document.getElementById('editorSection').style.display = 'block';

        initializeCanvas(imageUrl);
    } catch (error) {
        console.error('Error:', error);
        alert('Failed to remove background. Please try again.');
        document.getElementById('loadingSection').style.display = 'none';
        document.getElementById('uploadSection').style.display = 'block';
    }
}

function initializeCanvas(photoUrl) {
    const canvas = document.getElementById('pfpCanvas');
    canvas.style.background = `url('${backgrounds[0]}') center/cover`;
    canvas.style.backgroundSize = 'cover';
    canvas.style.backgroundPosition = 'center';
    
    pfpLayers.photo = createLayer('photo', photoUrl, 100, 50, 300, 300);
    canvas.appendChild(pfpLayers.photo);
    
    pfpLayers.shirt = createLayer('shirt', 'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68dd61c49bed1221ed5b779f_Layer%202.png', 100, 220, 200, 200);
    canvas.appendChild(pfpLayers.shirt);
    
    pfpLayers.hat = createLayer('hat', 'https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/68dd61c4b992854c1ac43978_Layer%202%20copy.png', 120, 0, 260, 260);
    canvas.appendChild(pfpLayers.hat);
}
        
function createLayer(id, src, x, y, width, height) {
    const layer = document.createElement('div');
    layer.className = 'pfp-layer';
    layer.id = `layer-${id}`;
    layer.style.left = x + 'px';
    layer.style.top = y + 'px';
    layer.style.width = width + 'px';
    layer.style.height = height + 'px';
    
    const img = document.createElement('img');
    img.src = src;
    img.draggable = false;
    img.crossOrigin = 'anonymous';
    layer.appendChild(img);
    
    const resizeHandle = document.createElement('div');
    resizeHandle.className = 'pfp-resize-handle';
    layer.appendChild(resizeHandle);
    
    layer.addEventListener('mousedown', startDrag);
    layer.addEventListener('touchstart', startDrag);
    
    resizeHandle.addEventListener('mousedown', startResize);
    resizeHandle.addEventListener('touchstart', startResize);
    
    return layer;
}

function startDrag(e) {
    if (e.target.className === 'pfp-resize-handle') return;
    e.preventDefault();
    
    currentDragging = this;
    const rect = this.getBoundingClientRect();
    const clientX = e.touches ? e.touches[0].clientX : e.clientX;
    const clientY = e.touches ? e.touches[0].clientY : e.clientY;
    
    dragOffset.x = clientX - rect.left;
    dragOffset.y = clientY - rect.top;
    
    document.querySelectorAll('.pfp-layer').forEach(l => l.classList.remove('active'));
    this.classList.add('active');
}

function startResize(e) {
    e.preventDefault();
    e.stopPropagation();
    currentResizing = this.parentElement;
    
    document.querySelectorAll('.pfp-layer').forEach(l => l.classList.remove('active'));
    currentResizing.classList.add('active');
}

document.addEventListener('mousemove', handleMove);
document.addEventListener('touchmove', handleMove, { passive: false });

document.addEventListener('mouseup', stopDragResize);
document.addEventListener('touchend', stopDragResize);

function handleMove(e) {
    if (currentDragging || currentResizing) {
        e.preventDefault();
    }
    
    const clientX = e.touches ? e.touches[0].clientX : e.clientX;
    const clientY = e.touches ? e.touches[0].clientY : e.clientY;
    
    if (currentDragging) {
        const container = document.getElementById('canvasContainer').getBoundingClientRect();
        let newX = clientX - container.left - dragOffset.x;
        let newY = clientY - container.top - dragOffset.y;
        
        currentDragging.style.left = newX + 'px';
        currentDragging.style.top = newY + 'px';
    }
    
    if (currentResizing) {
        const rect = currentResizing.getBoundingClientRect();
        
        const newWidth = clientX - rect.left;
        const newHeight = clientY - rect.top;
        
        if (newWidth > 50 && newHeight > 50) {
            currentResizing.style.width = newWidth + 'px';
            currentResizing.style.height = newHeight + 'px';
        }
    }
}

function stopDragResize() {
    currentDragging = null;
    currentResizing = null;
}

function toggleLayer(layerName) {
    layerStates[layerName] = !layerStates[layerName];
    const layer = pfpLayers[layerName];
    if (layer) {
        layer.style.display = layerStates[layerName] ? 'block' : 'none';
    }
    
    const buttons = document.querySelectorAll('.pfp-layer-btn');
    buttons.forEach(btn => {
        if (btn.textContent.toLowerCase().includes(layerName)) {
            btn.classList.toggle('active');
        }
    });
}

        function flipHat() {
    const hat = pfpLayers.hat;
    if (!hat) return;
    
    const currentTransform = hat.style.transform || '';
    if (currentTransform.includes('scaleX(-1)')) {
        hat.style.transform = currentTransform.replace('scaleX(-1)', 'scaleX(1)');
    } else {
        hat.style.transform = currentTransform + ' scaleX(-1)';
    }
}

function resetLayers() {
    if (pfpLayers.photo) {
        pfpLayers.photo.style.left = '100px';
        pfpLayers.photo.style.top = '50px';
        pfpLayers.photo.style.width = '300px';
        pfpLayers.photo.style.height = '300px';
    }
    if (pfpLayers.shirt) {
    pfpLayers.shirt.style.left = '100px';
    pfpLayers.shirt.style.top = '220px';
    pfpLayers.shirt.style.width = '200px';
    pfpLayers.shirt.style.height = '200px';
    pfpLayers.shirt.style.display = 'block';
    layerStates.shirt = true;
}
    if (pfpLayers.hat) {
        pfpLayers.hat.style.left = '120px';
        pfpLayers.hat.style.top = '0px';
        pfpLayers.hat.style.width = '260px';
        pfpLayers.hat.style.height = '260px';
        pfpLayers.hat.style.display = 'block';
        layerStates.hat = true;
    }
    
    document.querySelectorAll('.pfp-layer-btn').forEach((btn, index) => {
        if (index < 2) btn.classList.add('active');
    });
}

async function downloadPfp() {
    const canvasContainer = document.getElementById('canvasContainer');
    const containerWidth = canvasContainer.offsetWidth;
    const containerHeight = canvasContainer.offsetHeight;
    
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = containerWidth;
    canvas.height = containerHeight;
    
    // Draw background
    const bgStyle = document.getElementById('pfpCanvas').style.background;
    const bgImage = new Image();
    bgImage.crossOrigin = 'anonymous';
    const urlMatch = bgStyle.match(/url\(['"]?([^'"]+)['"]?\)/);
    if (urlMatch) {
        bgImage.src = urlMatch[1];
        await new Promise(resolve => {
            bgImage.onload = resolve;
        });
        ctx.drawImage(bgImage, 0, 0, containerWidth, containerHeight);
    } else {
        ctx.fillStyle = bgStyle;
        ctx.fillRect(0, 0, containerWidth, containerHeight);
    }
    
    // Draw layers in order
    const layerOrder = ['photo', 'shirt', 'hat'];
    
    for (const layerName of layerOrder) {
        const layer = pfpLayers[layerName];
        if (!layer || layer.style.display === 'none') continue;
        
        const img = layer.querySelector('img');
        const x = parseInt(layer.style.left);
        const y = parseInt(layer.style.top);
        const width = parseInt(layer.style.width);
        const height = parseInt(layer.style.height);
        
        if (img.complete) {
            ctx.drawImage(img, x, y, width, height);
        } else {
            await new Promise(resolve => {
                img.onload = () => {
                    ctx.drawImage(img, x, y, width, height);
                    resolve();
                };
            });
        }
    }
    
    canvas.toBlob((blob) => {
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.download = 'mcdonalds-pfp.png';
        link.href = url;
        link.click();
        URL.revokeObjectURL(url);
    });
}

        // Background music handler
let musicStarted = false;
const bgMusic = document.getElementById('bgMusic');
bgMusic.volume = 0.5; // Set default volume to 50%

function startMusic() {
    if (!musicStarted) {
        bgMusic.play().catch(err => {
            console.log('Audio play failed:', err);
        });
        musicStarted = true;
        // Remove listeners after music starts
        document.removeEventListener('click', startMusic);
        document.removeEventListener('touchstart', startMusic);
        document.removeEventListener('keydown', startMusic);
    }
}

function toggleAudio() {
    const icon = document.getElementById('audioIcon');
    if (bgMusic.paused) {
        bgMusic.play();
        icon.textContent = 'üîä';
    } else {
        bgMusic.pause();
        icon.textContent = 'üîá';
    }
}

function changeVolume(value) {
    bgMusic.volume = value / 100;
}

// Add listeners for first user interaction
document.addEventListener('click', startMusic);
document.addEventListener('touchstart', startMusic);
document.addEventListener('keydown', startMusic);
    </script>
</body>
</html>
